:root {
    --bg: #F6F8FB;
    --fg: #0F172A;
    --muted: #6B7280;
    --card: #FFFFFF;
    --border: #E5E7EB;
    --blue: #213D72;
    --red: #E41B13;
    --gap: 18px
}

* {
    box-sizing: border-box
}

html, body {
    max-width: 100vw;
    overflow: hidden;
    height: 100%;
}

body {
    margin: 0;
    background: var(--bg);
    color: var(--fg);
    font-family: Roboto, system-ui, -apple-system, Segoe UI, Helvetica, Arial;
}

body.mobile-menu-open {
    overflow: hidden;
}

.app {
    display: grid;
    grid-template-columns: 72px 1fr;
    height: 100vh;
    transition: grid-template-columns 0.3s ease-in-out;
}

.main-content {
    overflow-y: auto;
}

header {
    position: sticky;
    top: 0;
    z-index: 4;
    background: #FFFFFFE6;
    border-bottom: 1px solid var(--border);
    backdrop-filter: saturate(180%) blur(8px);
}

.sidebar {
    background: var(--blue);
    color: #fff;
    z-index: 5;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-top: 16px;
}

.sidebar nav {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-top: 8px;
    width: 100%;
    align-items: center
}

.sidebar a {
    width: 56px;
    height: 44px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    text-decoration: none;
    opacity: .9
}

.sidebar a:hover {
    background: rgba(255, 250, 250, .12);
    opacity: 1
}

.sidebar a.active {
    background-color: var(--red);
    color: #fff;
    opacity: 1;
}

.sidebar a.active svg {
    color: #fff;
}

.sidebar .label {
    opacity: 0;
    width: 0;
    overflow: hidden;
    white-space: nowrap;
    transition: opacity 0.2s ease-in-out, width 0.3s ease-in-out;
}

.wrap {
    width: 100%;
    max-width: 1280px;
    margin: 0 auto;
    padding: var(--gap)
}

header .wrap {
    display: grid;
    gap: 0 var(--gap);
    grid-template-columns: 1fr auto;
    grid-template-rows: auto auto;
    grid-template-areas: "main right" "bottom bottom";
    align-items: center;
}

.header-top-row { grid-area: main; }
.header-right-col { grid-area: right; display: flex; flex-direction: column; align-items: flex-end; align-self: start; gap: 8px; }
.header-bottom-row { grid-area: bottom; margin-top: 12px; display: flex; align-items: center; gap: 16px; }
.row { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
.title { font-weight: 700; font-size: 26px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; min-width: 0; }
.header-main { display: flex; flex-direction: column; align-items: flex-start; gap: 8px; flex-grow: 1; min-width: 0; }
.header-actions { display: flex; gap: 8px; }

select, input[type="date"] {
    padding: 8px 10px;
    border: 1px solid var(--border);
    border-radius: 10px;
    background: #fff;
    font-family: inherit;
    font-size: 14px;
}

.icon-btn { padding: 8px; border-radius: 10px; border: 1px solid var(--border); background: #fff; cursor: pointer; line-height: 0; color: var(--fg); }
.icon-btn:hover { background-color: #f0f0f0; }
#menu-toggle { display: none; }

.overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 99; opacity: 0; pointer-events: none; transition: opacity 0.3s ease; }
body.mobile-menu-open .overlay { opacity: 1; pointer-events: auto; }
.badge { border: 1px solid var(--border); background: #fff; border-radius: 999px; padding: 2px 8px; font-size: 11px; color: var(--muted); flex-shrink: 0; }
#compare-mode-badge { background-color: var(--muted); color: white; border-color: transparent; }

main .wrap { padding-top: var(--gap); padding-bottom: var(--gap); display: grid; gap: var(--gap); }
.view { display: grid; gap: var(--gap); }
.kpis, .kpis-5-cols { display: grid; gap: var(--gap); }
.kpis { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }
.kpis-5-cols { grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); }
.view > * { margin: 0; }
.card { background: var(--card); border: 1px solid var(--border); border-radius: 16px; padding: 16px; word-wrap: break-word; overflow-wrap: break-word; }
.kpi-label { font-size: 14px; color: var(--fg); font-weight: 500; }
.kpi-value-simple { font-size: 36px; font-weight: 700; margin-top: 8px; margin-bottom: 8px; }
.kpi-delta-simple { font-size: 16px; font-weight: 700; }
.kpi-compare-layout { display: flex; gap: 12px; align-items: center; margin-top: 4px; }
.kpi-compare-values { flex-grow: 1; }
.kpi-period-row { display: flex; justify-content: space-between; align-items: baseline; }
.kpi-period-row .period-label { font-size: 12px; color: var(--muted); }
.kpi-period-row .value { font-size: 24px; font-weight: 700; }
.kpi-compare-delta { font-size: 24px; font-weight: 700; text-align: right; }
.table-scroll-wrapper { overflow-x: auto; -webkit-overflow-scrolling: touch; }
.top-content-table { width: 100%; border-collapse: collapse; margin-top: 12px; }
.top-content-table th, .top-content-table td { padding: 12px; text-align: left; border-bottom: 1px solid var(--border); vertical-align: middle; white-space: nowrap; }
.top-content-table thead th { background-color: var(--bg); color: var(--muted); font-weight: 500; font-size: 12px; }
.top-content-table tbody tr:last-child td { border-bottom: none; }
footer { grid-column: 1 / -1; text-align: center; padding: 24px var(--gap); color: var(--muted); font-size: 12px; }

#compareWrap.compare-full { display: grid; grid-template-columns: 1fr 1fr; gap: var(--gap); width: 100%; }
#compareWrap.compare-full .periodo { flex: 1; min-width: 0; background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 12px; display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 12px; align-items: end; }
#compareWrap.compare-full .periodo label { display: flex; flex-direction: column; gap: 4px; }
#compareWrap.compare-full .periodo input { width: 100%; }

@media (max-width: 820px) {
    .app { grid-template-columns: 1fr; height: auto; overflow: visible; }
    .main-content { overflow-y: visible; }
    #menu-toggle { display: block; }
    .sidebar { position: fixed; top: 0; left: 0; bottom: 0; height: 100vh; width: 240px; transform: translateX(-100%); transition: transform 0.3s ease-in-out; z-index: 100; padding-top: 16px; }
    body.mobile-menu-open .sidebar { transform: translateX(0); display: flex; }
    .sidebar nav { align-items: stretch; padding: 0 8px; }
    .sidebar a { width: auto; justify-content: flex-start; gap: 10px; padding: 10px 16px; }
    .sidebar .label { opacity: 1; width: auto; }
    header { position: fixed; left: 0; right: 0; }
    header .wrap { display: flex; flex-direction: column; align-items: flex-start; gap: 16px; }
    .header-right-col { display: flex; flex-direction: row; align-items: center; justify-content: space-between; width: 100%; order: 1; }
    .header-left-group { display: flex; align-items: center; gap: 8px; }
    .header-top-row { width: 100%; order: 2; }
    .header-bottom-row { width: 100%; order: 3; margin-top: 0; }
    .title { font-size: 22px; }
}

@media (max-width: 600px) {
    .kpis, .kpis-5-cols { grid-template-columns: 1fr; }
}

@media (max-width: 480px) {
    .wrap { padding: 12px; }
    .title { font-size: 20px; }
    .header-bottom-row { flex-direction: column; align-items: stretch; gap: 12px; }
    #compareWrap.compare-full { grid-template-columns: 1fr 1fr; }
    #compareWrap.compare-full .periodo { grid-template-columns: 1fr; gap: 8px; }
}
